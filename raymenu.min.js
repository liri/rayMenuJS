/*
 * ----------------------------- Ray Menu -------------------------------------
 * Responsive menu that expands only when user is on top of the page.
 * Supported by all modern browsers: IE9+, Firefox, Safari, Chrome and Opera
 * Prerequisite: JQuery
 *
 * Copyright (c) 2013 - 2014 Liron Aichel, work.liron@gmail.com
 *
 * Licensed under MIT-style license:
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */
(function(){function a(){this.version="1.0.2";this.options={openHeight:35,closeHeight:24};this.sel={raymenu:".rayMenu",items:"> li",open:" .open",close:" .close"};this.events={}}a.prototype.init=function(e){var c=this;c.element=e;e.addClass("rayMenu");var b=e.find(c.sel.items);if($(window).scrollTop()>c.options.openHeight){c.element.addClass("collapsed");b.height(c.options.closeHeight);b.find(c.sel.open).hide();c.element.css({"padding-left":0,width:c.element.parent().width(),height:c.options.closeHeight})}else{c.element.addClass("expanded");b.height(c.options.openHeight);b.find(c.sel.close).hide();var f=0;b.each(function(h,g){if(!$(g).hasClass("right")){f+=$(g).outerWidth()}});var d=c.element.parent().width()/2-f/2;c.element.css({"padding-left":d,width:c.element.parent().width()-d,height:c.options.openHeight})}$(window).scroll(function(){if($(window).scrollTop()>c.options.openHeight){if(c.isExpanded()){c.collapse()}}else{if(!c.isExpanded()){c.expand()}}});$(window).on("resize",function(){if(c.isExpanded()){c.expand()}else{c.collapse()}})};a.prototype.isExpanded=function(){return this.element.hasClass("expanded")};a.prototype.collapse=function(){var b=this;b.element.removeClass("expanded").addClass("collapsed");b.element.find(b.sel.items).each(function(e,c){var f=$(c);var d=f.find(b.sel.open);var g=f.find(b.sel.close);f.stop().animate({height:b.options.closeHeight});d.stop().fadeOut("fast");g.stop().fadeIn("fast")});b.element.stop().animate({"padding-left":0,width:b.element.parent().width(),height:b.options.closeHeight})};a.prototype.expand=function(){var b=this;b.element.addClass("expanded").removeClass("collapsed");var d=0;b.element.find(b.sel.items).each(function(g,e){var h=$(e);var f=h.find(b.sel.open);var j=h.find(b.sel.close);h.stop().animate({height:b.options.openHeight});f.stop().fadeIn("fast");j.stop().fadeOut("fast");if(!$(e).hasClass("right")){d+=$(e).outerWidth()}});var c=b.element.parent().width()/2-d/2;b.element.stop().animate({"padding-left":c,width:b.element.parent().width()-c,height:b.options.openHeight})};$.fn.rayMenu=function(d){if(this.length>1){var c=[];this.each(function(){c.push($(this).rayMenu(d))});return c}if(this.data("rayMenu")){return this.data("rayMenu")}if(this&&this.is("ul")){var b=new a();var e={openHeight:this.attr("data-open-height"),closeHeight:this.attr("data-close-height")};$.extend(b.options,e,d);b.init(this);this.data("rayMenu",b);return b}};$(document).ready(function(){$("body [data-role='rayMenu']").rayMenu()})})();